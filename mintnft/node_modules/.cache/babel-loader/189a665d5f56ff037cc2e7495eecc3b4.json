{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\x7491\\\\nft-minter-tutorial\\\\minter-starter-files\\\\src\\\\utils\\\\interact.js\";\nimport { pinJSONToIPFS, pinFileToIPFS } from './pinata.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n\nconst alchemyKey = process.env.REACT_APP_ALCHEMY_KEY;\n\nconst {\n  createAlchemyWeb3\n} = require(\"@alch/alchemy-web3\");\n\nconst web3 = createAlchemyWeb3(alchemyKey);\n\nconst contractABI = require('../contract-abi.json');\n\nconst contractAddress = \"0xA10A93F2ec836aF72A720b1F137Afcfe940eA11E\";\nexport const mintNFT = async (image, name, description) => {\n  //error handling\n  // if (url.trim() == \"\" || (name.trim() == \"\" || description.trim() == \"\")) {\n  //        return {\n  //            success: false,\n  //            status: \"❗Please make sure all fields are completed before minting.\",\n  //        }\n  //  }\n  //1. image upload\n  //make pinata call\n  const pinataResponse1 = await pinFileToIPFS(image);\n\n  if (!pinataResponse1.success) {\n    return {\n      success: false,\n      status: \"image 😢 Something went wrong while uploading your tokenURI.\"\n    };\n  } //2. metadata upload\n  //make metadata\n\n\n  const metadata = new Object();\n  metadata.name = name;\n  metadata.url = pinataResponse1.pinataUrl;\n  ;\n  metadata.description = description; //make pinata call\n\n  const pinataResponse2 = await pinJSONToIPFS(metadata);\n\n  if (!pinataResponse2.success) {\n    return {\n      success: false,\n      status: \"😢 Something went wrong while uploading your tokenURI.\"\n    };\n  }\n\n  const tokenURI = pinataResponse2.pinataUrl;\n  window.contract = await new web3.eth.Contract(contractABI, contractAddress); //set up your Ethereum transaction\n\n  const transactionParameters = {\n    to: contractAddress,\n    // Required except during contract publications.\n    from: window.ethereum.selectedAddress,\n    // must match user's active address.\n    'data': window.contract.methods.mintNFT(window.ethereum.selectedAddress, tokenURI).encodeABI() //make call to NFT smart contract\n\n  }; //sign the transaction via Metamask\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: 'eth_sendTransaction',\n      params: [transactionParameters]\n    });\n    return {\n      success: true,\n      status: \"✅ Check out your transaction on Etherscan: https://goerli.etherscan.io/tx/\" + txHash\n    };\n  } catch (error) {\n    return {\n      success: false,\n      status: \"😥 Something went wrong: \" + error.message\n    };\n  }\n};\nexport const connectWallet = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      const obj = {\n        status: \"Write a message in the text-field above.\",\n        address: addressArray[0]\n      };\n      return obj;\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"😥 \" + err.message\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: `https://metamask.io/download.html`,\n            children: \"You must install Metamask, a virtual Ethereum wallet, in your browser.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    };\n  }\n};\nexport const getCurrentWalletConnected = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_accounts\"\n      });\n\n      if (addressArray.length > 0) {\n        return {\n          address: addressArray[0],\n          status: \"👆🏽 Write a message in the text-field above.\"\n        };\n      } else {\n        return {\n          address: \"\",\n          status: \"🦊 Connect to Metamask using the top right button.\"\n        };\n      }\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"😥 \" + err.message\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: `https://metamask.io/download.html`,\n            children: \"You must install Metamask, a virtual Ethereum wallet, in your browser.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    };\n  }\n};","map":{"version":3,"sources":["C:/Users/x7491/nft-minter-tutorial/minter-starter-files/src/utils/interact.js"],"names":["pinJSONToIPFS","pinFileToIPFS","require","config","alchemyKey","process","env","REACT_APP_ALCHEMY_KEY","createAlchemyWeb3","web3","contractABI","contractAddress","mintNFT","image","name","description","pinataResponse1","success","status","metadata","Object","url","pinataUrl","pinataResponse2","tokenURI","window","contract","eth","Contract","transactionParameters","to","from","ethereum","selectedAddress","methods","encodeABI","txHash","request","method","params","error","message","connectWallet","addressArray","obj","address","err","getCurrentWalletConnected","length"],"mappings":"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","sourcesContent":["import {pinJSONToIPFS, pinFileToIPFS} from './pinata.js'\r\nrequire('dotenv').config();\r\nconst alchemyKey = process.env.REACT_APP_ALCHEMY_KEY;\r\nconst { createAlchemyWeb3 } = require(\"@alch/alchemy-web3\");\r\nconst web3 = createAlchemyWeb3(alchemyKey);\r\n\r\nconst contractABI = require('../contract-abi.json')\r\nconst contractAddress = \"0xA10A93F2ec836aF72A720b1F137Afcfe940eA11E\";\r\n\r\nexport const mintNFT = async(image, name, description) => {\r\n //error handling\r\n// if (url.trim() == \"\" || (name.trim() == \"\" || description.trim() == \"\")) {\r\n//        return {\r\n//            success: false,\r\n//            status: \"❗Please make sure all fields are completed before minting.\",\r\n//        }\r\n//  }\r\n\r\n\r\n  //1. image upload\r\n  //make pinata call\r\n  const pinataResponse1 = await pinFileToIPFS(image)\r\n  if (!pinataResponse1.success) {\r\n    return {\r\n      success: false,\r\n      status: \"image 😢 Something went wrong while uploading your tokenURI.\",\r\n    }\r\n  }\r\n\r\n  //2. metadata upload\r\n  //make metadata\r\n  const metadata = new Object();\r\n  metadata.name = name;\r\n  metadata.url = pinataResponse1.pinataUrl;;\r\n  metadata.description = description;\r\n  //make pinata call\r\n  const pinataResponse2 = await pinJSONToIPFS(metadata);\r\n  if (!pinataResponse2.success) {\r\n      return {\r\n          success: false,\r\n          status: \"😢 Something went wrong while uploading your tokenURI.\",\r\n      }\r\n  }\r\n  const tokenURI = pinataResponse2.pinataUrl;\r\n\r\n  window.contract = await new web3.eth.Contract(contractABI, contractAddress);\r\n\r\n  //set up your Ethereum transaction\r\n const transactionParameters = {\r\n        to: contractAddress, // Required except during contract publications.\r\n        from: window.ethereum.selectedAddress, // must match user's active address.\r\n        'data': window.contract.methods.mintNFT(window.ethereum.selectedAddress, tokenURI).encodeABI()//make call to NFT smart contract\r\n };\r\n\r\n//sign the transaction via Metamask\r\n try {\r\n    const txHash = await window.ethereum\r\n        .request({\r\n            method: 'eth_sendTransaction',\r\n            params: [transactionParameters],\r\n        });\r\n    return {\r\n        success: true,\r\n        status: \"✅ Check out your transaction on Etherscan: https://goerli.etherscan.io/tx/\" + txHash\r\n    }\r\n } catch (error) {\r\n    return {\r\n        success: false,\r\n        status: \"😥 Something went wrong: \" + error.message\r\n    }\r\n\r\n }\r\n}\r\n\r\nexport const connectWallet = async () => {\r\n  if (window.ethereum) {\r\n    try {\r\n      const addressArray = await window.ethereum.request({\r\n        method: \"eth_requestAccounts\",\r\n      });\r\n      const obj = {\r\n        status: \"Write a message in the text-field above.\",\r\n        address: addressArray[0],\r\n      };\r\n      return obj;\r\n    } catch (err) {\r\n      return {\r\n        address: \"\",\r\n        status: \"😥 \" + err.message,\r\n      };\r\n    }\r\n  } else {\r\n    return {\r\n      address: \"\",\r\n      status: (\r\n        <span>\r\n          <p>\r\n            {\" \"}\r\n            🦊{\" \"}\r\n            <a target=\"_blank\" href={`https://metamask.io/download.html`}>\r\n              You must install Metamask, a virtual Ethereum wallet, in your\r\n              browser.\r\n            </a>\r\n          </p>\r\n        </span>\r\n      ),\r\n    };\r\n  }\r\n};\r\n\r\nexport const getCurrentWalletConnected = async () => {\r\n  if (window.ethereum) {\r\n    try {\r\n      const addressArray = await window.ethereum.request({\r\n        method: \"eth_accounts\",\r\n      });\r\n      if (addressArray.length > 0) {\r\n        return {\r\n          address: addressArray[0],\r\n          status: \"👆🏽 Write a message in the text-field above.\",\r\n        };\r\n      } else {\r\n        return {\r\n          address: \"\",\r\n          status: \"🦊 Connect to Metamask using the top right button.\",\r\n        };\r\n      }\r\n    } catch (err) {\r\n      return {\r\n        address: \"\",\r\n        status: \"😥 \" + err.message,\r\n      };\r\n    }\r\n  } else {\r\n    return {\r\n      address: \"\",\r\n      status: (\r\n        <span>\r\n          <p>\r\n            {\" \"}\r\n            🦊{\" \"}\r\n            <a target=\"_blank\" href={`https://metamask.io/download.html`}>\r\n              You must install Metamask, a virtual Ethereum wallet, in your\r\n              browser.\r\n            </a>\r\n          </p>\r\n        </span>\r\n      ),\r\n    };\r\n  }\r\n};"]},"metadata":{},"sourceType":"module"}