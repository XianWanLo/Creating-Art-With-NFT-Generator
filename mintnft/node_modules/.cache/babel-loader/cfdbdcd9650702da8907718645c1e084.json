{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/x7491/Creating-Art-With-NFT-Generator/mintnft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/x7491/Creating-Art-With-NFT-Generator/mintnft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/x7491/Creating-Art-With-NFT-Generator/mintnft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState,useRef}from\"react\";import{connectWallet,getCurrentWalletConnected,mintNFT}from\"./utils/interact.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Minter=function Minter(props){//State variables\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),walletAddress=_useState2[0],setWallet=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setDescription=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),image=_useState10[0],setImage=_useState10[1];var imageRef=useRef();function addWalletListener(){if(window.ethereum){window.ethereum.on(\"accountsChanged\",function(accounts){if(accounts.length>0){setWallet(accounts[0]);setStatus(\" Write a message in the text-field above.\");}else{setWallet(\"\");setStatus(\" Connect to Metamask.\");}});}else{setStatus(/*#__PURE__*/_jsxs(\"p\",{children:[\" \",\"\\uD83E\\uDD8A\",\" \",/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"https://metamask.io/download.html\",children:\"You must install Metamask, a virtual Ethereum wallet, in your browser.\"})]}));}}useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getCurrentWall,address,status;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCurrentWalletConnected();case 2:_yield$getCurrentWall=_context.sent;address=_yield$getCurrentWall.address;status=_yield$getCurrentWall.status;setWallet(address);setStatus(status);addWalletListener();case 8:case\"end\":return _context.stop();}}},_callee);})),[]);var connectWalletPressed=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var walletResponse;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return connectWallet();case 2:walletResponse=_context2.sent;setStatus(walletResponse.status);setWallet(walletResponse.address);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function connectWalletPressed(){return _ref2.apply(this,arguments);};}();var onMintPressed=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _yield$mintNFT,status;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return mintNFT(image,name,description);case 2:_yield$mintNFT=_context3.sent;status=_yield$mintNFT.status;setStatus(status);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function onMintPressed(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"Minter\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"walletButton\",onClick:connectWalletPressed,children:walletAddress.length>0?\"Connected: \"+String(walletAddress).substring(0,6)+\"...\"+String(walletAddress).substring(38):/*#__PURE__*/_jsx(\"span\",{children:\"Connect Wallet\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{id:\"title\",children:\" NFT Minter \"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Image: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(event){return setImage(event.target.files[0]);},required:true}),/*#__PURE__*/_jsx(\"h2\",{children:\"The Name of the NFT: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(event){return setName(event.target.value);}}),/*#__PURE__*/_jsx(\"h2\",{children:\"The Description of the NFT: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(event){return setDescription(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{id:\"mintButton\",onClick:onMintPressed,children:\"Mint NFT\"}),/*#__PURE__*/_jsx(\"p\",{id:\"status\",children:status})]});};export default Minter;","map":{"version":3,"names":["useEffect","useState","useRef","connectWallet","getCurrentWalletConnected","mintNFT","Minter","props","walletAddress","setWallet","status","setStatus","name","setName","description","setDescription","image","setImage","imageRef","addWalletListener","window","ethereum","on","accounts","length","address","connectWalletPressed","walletResponse","onMintPressed","String","substring","event","target","files","value"],"sources":["C:/Users/x7491/Creating-Art-With-NFT-Generator/mintnft/src/Minter.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\r\nimport { connectWallet, getCurrentWalletConnected, mintNFT } from \"./utils/interact.js\";\r\n\r\nconst Minter = (props) => {\r\n\r\n  //State variables\r\n  const [walletAddress, setWallet] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const imageRef = useRef();\r\n\r\n\r\n  function addWalletListener() {\r\n  if (window.ethereum) {\r\n    window.ethereum.on(\"accountsChanged\", (accounts) => {\r\n      if (accounts.length > 0) {\r\n        setWallet(accounts[0]);\r\n        setStatus(\" Write a message in the text-field above.\");\r\n      } else {\r\n        setWallet(\"\");\r\n        setStatus(\" Connect to Metamask.\");\r\n      }\r\n    });\r\n  } else {\r\n    setStatus(\r\n      <p>\r\n        {\" \"}\r\n        ðŸ¦Š{\" \"}\r\n        <a target=\"_blank\" href={`https://metamask.io/download.html`}>\r\n          You must install Metamask, a virtual Ethereum wallet, in your\r\n          browser.\r\n        </a>\r\n      </p>\r\n    );\r\n  }\r\n}\r\n \r\n    useEffect(async () => {\r\n        const {address, status} = await getCurrentWalletConnected();\r\n        setWallet(address)\r\n        setStatus(status);\r\n        addWalletListener();\r\n    }, []);\r\n\r\n  const connectWalletPressed = async () => {\r\n    const walletResponse = await connectWallet();\r\n    setStatus(walletResponse.status);\r\n    setWallet(walletResponse.address);\r\n  };\r\n\r\nconst onMintPressed = async () => {\r\n//    let formData = new FormData()\r\n//    formData.append('file', url.data)\r\n//    const response = await fetch('http://localhost:5000/image', {\r\n//      method: 'POST',\r\n//      body: formData,\r\n//    })\r\n    const { status } = await mintNFT(image, name, description);\r\n    setStatus(status);\r\n};\r\n\r\n  return (\r\n    <div className=\"Minter\">\r\n      <button id=\"walletButton\" onClick={connectWalletPressed}>\r\n        {walletAddress.length > 0 ? (\r\n          \"Connected: \" +\r\n          String(walletAddress).substring(0, 6) +\r\n          \"...\" +\r\n          String(walletAddress).substring(38)\r\n        ) : (\r\n          <span>Connect Wallet</span>\r\n        )}\r\n      </button>\r\n\r\n      <br></br>\r\n      <h1 id=\"title\"> NFT Minter </h1>\r\n      <form>\r\n        <h2>Upload Image: </h2>\r\n        <input type=\"file\" onChange={(event) => setImage(event.target.files[0])} required />\r\n        <h2>The Name of the NFT: </h2>\r\n        <input\r\n          type=\"text\"\r\n          onChange={(event) => setName(event.target.value)}\r\n        />\r\n        <h2>The Description of the NFT: </h2>\r\n        <input\r\n          type=\"text\"\r\n          onChange={(event) => setDescription(event.target.value)}\r\n        />\r\n      </form>\r\n      <button id=\"mintButton\" onClick={onMintPressed}>\r\n        Mint NFT\r\n      </button>\r\n      <p id=\"status\">\r\n        {status}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Minter;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}